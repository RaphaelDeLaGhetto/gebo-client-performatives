/*! gebo-client-performatives - v0.0.15 - 2013-12-05
* Copyright (c) 2013 ; Licensed  */
angular.module("gebo-client-performatives",["gebo-client-performatives.conversationControl","gebo-client-performatives.requestControl","gebo-client-performatives.request"]),function(){"use strict";angular.module("gebo-client-performatives.conversationControl",["gebo-client-performatives.request","templates/server-reply-request.html","templates/client-reply-request.html","templates/server-propose-discharge-perform.html","templates/client-propose-discharge-perform.html","templates/server-reply-propose-discharge-perform.html","templates/client-reply-propose-discharge-perform.html","templates/server-perform.html"]).directive("conversationControl",function(a,b,c){var d=function(a,b,c){c.$observe("sc",function(c){a.sc=JSON.parse(c),e(a,b)}),c.$observe("email",function(c){a.email=c,e(a,b)}),c.$observe("conversationId",function(c){a.conversationId=c,e(a,b)})},e=function(d,e){if(d.sc&&d.email&&d.conversationId){var f=b.getDirectiveName(d.sc,d.email);e.html(a.get("templates/"+f+".html")),c(e.contents())(d)}},f=function(a){a.agree=function(){b.agree(a.sc,a.email,a.conversationId)},a.notUnderstood=function(){b.notUnderstood(a.sc,a.email,a.conversationId)},a.refuse=function(){b.refuse(a.sc,a.email,a.conversationId)},a.timeout=function(){b.timeout(a.sc,a.email,a.conversationId)},a.failure=function(){b.failure(a.sc,a.email,a.conversationId)},a.perform=function(){b.perform(a.sc,a.email,a.conversationId)},a.proposeDischarge=function(){b.proposeDischarge(a.sc,a.email,a.conversationId)},a.cancel=function(){b.cancel(a.sc,a.email,a.conversationId)}};return{restrict:"E",scope:!0,link:d,controller:f}})}(),function(){"use strict";angular.module("gebo-client-performatives.requestControl",["gebo-client-performatives.request","templates/request-control.html"]).directive("requestControl",function(a,b,c){var d=function(a,b,c){c.$observe("sender",function(c){a.sender=c,e(a,b)}),c.$observe("receiver",function(c){a.receiver=c,e(a,b)}),c.$observe("action",function(c){a.action=c,e(a,b)}),c.$observe("gebo",function(c){a.gebo=c,e(a,b)}),c.$observe("content",function(c){a.content=c,e(a,b)})},e=function(b,d){d.html(a.get("templates/request-control.html")),c(d.contents())(b)},f=function(a){a.request=function(){b.request(a.sender,a.receiver,a.action,a.gebo)}};return{restrict:"E",scope:!0,link:d,controller:f}})}(),angular.module("templates/client-propose-discharge-perform.html",[]).run(["$templateCache",function(a){a.put("templates/client-propose-discharge-perform.html",'<span ng-hide="sc.fulfilled">\n    <button class="btn btn-small" ng-click="cancel()">\n        <span class="glyphicon glyphicon-remove"></span>\n    </button>\n</span>\n<span ng-show="sc.fulfilled">\n    <span class="glyphicon glyphicon-check"></span>\n</span>\n')}]),angular.module("templates/client-reply-propose-discharge-perform.html",[]).run(["$templateCache",function(a){a.put("templates/client-reply-propose-discharge-perform.html",'<span ng-hide="sc.fulfilled">\n    <button class="btn btn-small" ng-click="notUnderstood()">\n        <span class="glyphicon glyphicon-question-sign"></span>\n    </button>\n    <button class="btn btn-small" ng-click="refuse()">\n        <span class="glyphicon glyphicon-thumbs-down"></span>\n    </button>\n    <button class="btn btn-small" ng-click="timeout()">\n        <span class="glyphicon glyphicon-time"></span>\n    </button>\n    <button class="btn btn-small" ng-click="agree()">\n        <span class="glyphicon glyphicon-thumbs-up"></span>\n    </button>\n</span>\n<span ng-show="sc.fulfilled">\n    <span class="glyphicon glyphicon-check"></span>\n</span>\n')}]),angular.module("templates/client-reply-request.html",[]).run(["$templateCache",function(a){a.put("templates/client-reply-request.html",'<span ng-show="sc.fulfilled">\n    <span class="glyphicon glyphicon-check"></span>\n</span>\n')}]),angular.module("templates/request-control.html",[]).run(["$templateCache",function(a){a.put("templates/request-control.html",'<button class="btn btn-small" ng-click="request()"\n'+"        ng-disabled=\"!'{{sender}}' || !'{{receiver}}' || !'{{action}}' || !'{{gebo}}'\">\n    <span class=\"glyphicon glyphicon-envelope\"></span>\n</button>\n")}]),angular.module("templates/server-perform.html",[]).run(["$templateCache",function(a){a.put("templates/server-perform.html",'<span ng-hide="sc.fulfilled">\n    <button class="btn btn-small" ng-click="perform()">\n        <span class="glyphicon glyphicon-ok"></span>\n    </button>\n</span>\n<span ng-show="sc.fulfilled">\n    <span class="glyphicon glyphicon-check"></span>\n</span>\n')}]),angular.module("templates/server-propose-discharge-perform.html",[]).run(["$templateCache",function(a){a.put("templates/server-propose-discharge-perform.html",'<span ng-hide="sc.fulfilled">\n    <button class="btn btn-small" ng-click="failure()">\n        <span class="glyphicon glyphicon-flash"></span>\n    </button>\n    <button class="btn btn-small" ng-click="timeout()">\n        <span class="glyphicon glyphicon-time"></span>\n    </button>\n    <button class="btn btn-small" ng-click="proposeDischarge()">\n        <span class="glyphicon glyphicon-thumbs-up"></span>\n    </button>\n</span>\n<span ng-show="sc.fulfilled">\n    <span class="glyphicon glyphicon-check"></span>\n</span>\n')}]),angular.module("templates/server-reply-propose-discharge-perform.html",[]).run(["$templateCache",function(a){a.put("templates/server-reply-propose-discharge-perform.html",'<span ng-show="sc.fulfilled">\n    <span class="glyphicon glyphicon-check"></span>\n</span>\n')}]),angular.module("templates/server-reply-request.html",[]).run(["$templateCache",function(a){a.put("templates/server-reply-request.html",'<span ng-hide="sc.fulfilled">\n    <button class="btn btn-small" ng-click="notUnderstood()">\n        <span class="glyphicon glyphicon-question-sign"></span>\n    </button>\n    <button class="btn btn-small" ng-click="refuse()">\n        <span class="glyphicon glyphicon-thumbs-down"></span>\n    </button>\n    <button class="btn btn-small" ng-click="timeout()">\n        <span class="glyphicon glyphicon-time"></span>\n    </button>\n    <button class="btn btn-small" ng-click="agree()">\n        <span class="glyphicon glyphicon-thumbs-up"></span>\n    </button>\n</span>\n<span ng-show="sc.fulfilled">\n    <span class="glyphicon glyphicon-check"></span>\n</span>\n')}]),function(){"use strict";angular.module("gebo-client-performatives.request",["ngRoute","ngResource"]).factory("Request",function(){function a(a){m=a}function b(a){n=a}function c(a,b,c,d,e){m({sender:a,receiver:b,performative:"request",action:c,gebo:d,content:e})}function d(a,b,c){m({sender:b,receiver:a.debtor===b?a.creditor:a.debtor,performative:"cancel request",action:a.action,conversationId:c,content:a.message.content})}function e(a,b,c){m({sender:b,receiver:a.debtor===b?a.creditor:a.debtor,performative:"not-understood "+a.performative.split(" ").pop(),action:a.action,conversationId:c,content:a.message.content})}function f(a,b,c){m({sender:b,receiver:a.debtor===b?a.creditor:a.debtor,performative:"refuse "+a.performative.split(" ").pop(),action:a.action,conversationId:c,content:a.message.content})}function g(a,b,c){m({sender:b,receiver:a.debtor===b?a.creditor:a.debtor,performative:"timeout "+a.performative.split(" ").pop(),action:a.action,conversationId:c,content:a.message.content})}function h(a,b,c){m({sender:b,receiver:a.debtor===b?a.creditor:a.debtor,performative:"agree "+a.performative.split(" ").pop(),action:a.action,conversationId:c,content:a.message.content})}function i(a,b,c){m({sender:b,receiver:a.debtor===b?a.creditor:a.debtor,performative:"failure "+a.performative.split(" ").pop(),action:a.action,conversationId:c,content:a.message.content})}function j(a,b,c){n({sender:b,receiver:b,performative:"perform",action:a.action,conversationId:c,content:a.message.content})}function k(a,b,c){m({sender:b,receiver:a.debtor===b?a.creditor:a.debtor,performative:"propose "+a.performative.split(" ").pop(),action:a.action,conversationId:c,content:a.message.content})}function l(a,b){"string"==typeof a&&(a=JSON.parse(a));var c="server";switch(a.performative){case"reply request":c=a.debtor===b?"server":"client";break;case"propose discharge|perform":c=a.debtor===b?"server":"client";break;case"reply propose|discharge|perform":c=a.debtor===b?"client":"server"}return c+"-"+a.performative.replace(" ","-").replace(/\|/g,"-")}var m=function(a){console.log(a)},n=function(a){console.log(a)};return{agree:h,callback:function(a){m(a)},cancel:d,failure:i,getDirectiveName:l,notUnderstood:e,perform:j,performCallback:function(a){n(a)},proposeDischarge:k,setCallback:a,setPerformCallback:b,refuse:f,request:c,timeout:g}})}();