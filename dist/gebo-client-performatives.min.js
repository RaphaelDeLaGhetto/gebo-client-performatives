/*! gebo-client-performatives - v0.0.7 - 2013-12-02
* Copyright (c) 2013 ; Licensed  */
angular.module("gebo-client-performatives",["gebo-client-performatives.conversationControl","gebo-client-performatives.requestControl","gebo-client-performatives.request"]),function(){"use strict";angular.module("gebo-client-performatives.conversationControl",["gebo-client-performatives.request","templates/server-reply-request.html","templates/client-reply-request.html","templates/server-propose-discharge-perform.html","templates/client-propose-discharge-perform.html","templates/server-reply-propose-discharge-perform.html","templates/client-reply-propose-discharge-perform.html","templates/server-perform.html"]).directive("conversationControl",function(a,b,c){var d=function(a,b,c){c.$observe("sc",function(c){a.sc=c,e(a,b)}),c.$observe("email",function(c){a.email=c,e(a,b)}),c.$observe("conversationId",function(c){a.conversationId=c,e(a,b)})},e=function(d,e){if(d.sc&&d.email&&d.conversationId){var f=b.getDirectiveName(JSON.parse(d.sc),d.email);e.html(a.get("templates/"+f+".html")),c(e.contents())(d)}},f=function(a){a.agree=function(){b.agree(JSON.parse(a.sc),a.email,a.conversationId)},a.notUnderstood=function(){b.notUnderstood(JSON.parse(a.sc),a.email,a.conversationId)},a.refuse=function(){b.refuse(JSON.parse(a.sc),a.email,a.conversationId)},a.timeout=function(){b.timeout(JSON.parse(a.sc),a.email,a.conversationId)},a.failure=function(){b.failure(JSON.parse(a.sc),a.email,a.conversationId)},a.proposeDischarge=function(){b.proposeDischarge(JSON.parse(a.sc),a.email,a.conversationId)},a.cancel=function(){b.cancel(JSON.parse(a.sc),a.email,a.conversationId)}};return{restrict:"E",scope:!0,link:d,controller:f}})}(),function(){"use strict";angular.module("gebo-client-performatives.requestControl",["gebo-client-performatives.request","templates/request-control.html"]).directive("requestControl",function(a,b,c){var d=function(b,d){b.sender&&b.receiver&&b.action&&b.gebo&&(d.html(a.get("templates/request-control.html")),c(d.contents())(b))},e=function(a,c,d){d.$observe("sender",function(b){a.sender=b}),d.$observe("receiver",function(b){a.receiver=b}),d.$observe("action",function(b){a.action=b}),d.$observe("gebo",function(b){a.gebo=b}),a.request=function(){b.request(a.sender,a.receiver,a.action,a.gebo)}};return{restrict:"E",scope:!0,link:d,controller:e}})}(),angular.module("templates/client-propose-discharge-perform.html",[]).run(["$templateCache",function(a){a.put("templates/client-propose-discharge-perform.html",'<button class="btn btn-small" ng-click="cancel()">\n    <span class="glyphicon glyphicon-remove"></span></button>\n')}]),angular.module("templates/client-reply-propose-discharge-perform.html",[]).run(["$templateCache",function(a){a.put("templates/client-reply-propose-discharge-perform.html",'<button class="btn btn-small" ng-click="notUnderstood()">\n    <span class="glyphicon glyphicon-question-sign"></span></button>\n<button class="btn btn-small" ng-click="refuse()">\n    <span class="glyphicon glyphicon-thumbs-down"></span></button>\n<button class="btn btn-small" ng-click="agree()">\n    <span class="glyphicon glyphicon-thumbs-up"></span></button>\n')}]),angular.module("templates/client-reply-request.html",[]).run(["$templateCache",function(a){a.put("templates/client-reply-request.html","")}]),angular.module("templates/request-control.html",[]).run(["$templateCache",function(a){a.put("templates/request-control.html",'<button class="btn btn-small" ng-click="request()">\n    <span class="glyphicon glyphicon-envelope"></span></button>\n')}]),angular.module("templates/server-perform.html",[]).run(["$templateCache",function(a){a.put("templates/server-perform.html",'<button class="btn btn-small" ng-click="">\n    <span class="glyphicon glyphicon-ok"></span></button>\n')}]),angular.module("templates/server-propose-discharge-perform.html",[]).run(["$templateCache",function(a){a.put("templates/server-propose-discharge-perform.html","")}]),angular.module("templates/server-reply-propose-discharge-perform.html",[]).run(["$templateCache",function(a){a.put("templates/server-reply-propose-discharge-perform.html","")}]),angular.module("templates/server-reply-request.html",[]).run(["$templateCache",function(a){a.put("templates/server-reply-request.html",'<button class="btn btn-small" ng-click="notUnderstood()">\n    <span class="glyphicon glyphicon-question-sign"></span></button>\n<button class="btn btn-small" ng-click="refuse()">\n    <span class="glyphicon glyphicon-thumbs-down"></span></button>\n<button class="btn btn-small" ng-click="agree()">\n    <span class="glyphicon glyphicon-thumbs-up"></span></button>\n')}]),function(){"use strict";angular.module("gebo-client-performatives.request",["ngRoute","ngResource"]).factory("Request",function(){function a(a){k=a}function b(a,b,c,d){k({sender:a,receiver:b,performative:"request",action:c,gebo:d})}function c(a,b,c){k({sender:b,receiver:a.debtor===b?a.creditor:a.debtor,performative:"cancel request",action:a.action,conversationId:c})}function d(a,b,c){k({sender:b,receiver:a.debtor===b?a.creditor:a.debtor,performative:"not-understood "+a.performative.split(" ").pop(),action:a.action,conversationId:c})}function e(a,b,c){k({sender:b,receiver:a.debtor===b?a.creditor:a.debtor,performative:"refuse "+a.performative.split(" ").pop(),action:a.action,conversationId:c})}function f(a,b,c){k({sender:b,receiver:a.debtor===b?a.creditor:a.debtor,performative:"timeout "+a.performative.split(" ").pop(),action:a.action,conversationId:c})}function g(a,b,c){k({sender:b,receiver:a.debtor===b?a.creditor:a.debtor,performative:"agree "+a.performative.split(" ").pop(),action:a.action,conversationId:c})}function h(a,b,c){k({sender:b,receiver:a.debtor===b?a.creditor:a.debtor,performative:"failure "+a.performative.split(" ").pop(),action:a.action,conversationId:c})}function i(a,b,c){k({sender:b,receiver:a.debtor===b?a.creditor:a.debtor,performative:"propose "+a.performative.split(" ").pop(),action:a.action,conversationId:c})}function j(a,b){var c="server";switch(a.performative){case"reply request":c=a.debtor===b?"server":"client";break;case"propose discharge|perform":c=a.debtor===b?"server":"client";break;case"reply propose|discharge|perform":c=a.debtor===b?"client":"server"}return c+"-"+a.performative.replace(" ","-").replace(/\|/g,"-")}var k=function(a){console.log(a)};return{agree:g,callback:function(a){k(a)},cancel:c,failure:h,getDirectiveName:j,notUnderstood:d,proposeDischarge:i,setCallback:a,refuse:e,request:b,timeout:f}})}();